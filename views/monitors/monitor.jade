include ../vars.jade

mixin eventBlock(event, locale)
	.event_block(class=event.type)

		.event_header
			.event_type= __(event.type)
			.event_categorys
				each category in event.categorys
					.category= get_locale(category.title, locale)
			.event_age= event.age


		.event_body
			.event_body_title
				.event_title= get_locale(event.title, locale)
				.event_members
					each member in event.members
						.member_item
							.member_role= __n(member.role, member.ids.length)
							.member_list
								each id in member.ids
									.member_name= get_locale(id.name, locale)
			.event_body_schedule
				.event_halls
					if event.halls
						each hall in event.halls
							.item_hall= get_locale(hall.title, locale)
				if (event.type == 'exhibition')
					.event_interval= moment(event.interval.begin).format('DD MMMM') + ' — ' + moment(event.interval.end).format('DD MMMM')
				else
					.event_interval= moment(event.interval.begin).format('DD MMMM — HH:mm')
			.event_tickets
				if event.tickets.ids.length > 1
					each ticket in event.tickets.ids
						if ticket.events.length == 1
							.ticket_item
								span.ticket_price= ticket.price
								span= ' - '
								span.ticket_type= ticket.type
				else
					!= get_locale(event.tickets.alt, locale)



each area in areas
	.flip_area
		.area_inner
			each locale in ['ru']
				- i18n.setLocale(locale)
				- moment.locale(locale)
				.flip_lang
					.flip_header
						.header_title
							.header_date
								.date
								.time
									span.hours
									span.time_sep.tick :
									span.minutes
							.header_logo
								img.logo(src='/images/design/' + (locale == 'ru' ? 'logo_ru.svg' : 'logo_en.svg'))
								.logo_title= __('музейно-выставочное объединение')
						.header_contacts
							.area_title= get_locale(area.area.title, locale)
							.area_location
								.area_adress= get_locale(area.area.contacts.adress, locale)
								.area_schedule= get_locale(area.area.contacts.schedule, locale)
							.area_contacts
								.area_phones
									each phone in area.area.contacts.phones
										span.phone= phone
								.area_emails
									each email in area.area.contacts.emails
										span.email= email
					.flip_events
						each event in area.events
							if (event.type == 'exhibition')
								+eventBlock(event, locale)
						each event in area.events
							if (event.type != 'exhibition')
								+eventBlock(event, locale)